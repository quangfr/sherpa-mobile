:root{
--bg:#fafafa;--fg:#1c1c1c;--muted:#666;--muted2:#999;--card:#fff;--border:#e8e8e8;
--accent:#075985;--accent-strong:#0c4a6e;--green:#16a34a;--yellow:#ca8a04;--red:#dc2626;--pill:#f1f5f9;--pill-fg:#0f172a;
--stb-f:#166534;--note-f:#3730a3;--verb-f:#9a3412;--avis-f:#075985;--alerte-f:#991b1b;--prolongement-f:#0f766e;
--headH:20px; --hover:#f3f6ff;
--stb:#e6f4ea;--note:#eef2ff;--verb:#fff7ed;--avis:#e0f2fe;--alerte:#fee2e2;--prolongement:#ccfbf1;
--bar-g:#dcfce7;--bar-y:#fef9c3;--bar-r:#fee2e2;
}
html,body{height:100%;margin:0;color:var(--fg);font:14px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif}
body{background:var(--bg);position:relative;min-height:100%;z-index:0}
body::after{content:"";position:fixed;right:24px;bottom:24px;width:160px;height:160px;background:url('logo.gif') center/contain no-repeat;pointer-events:none;opacity:.08;z-index:0}
*{box-sizing:border-box}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
a{color:var(--accent);text-decoration:none}
header{position:sticky;top:0;z-index:10;background:var(--bg);border-bottom:1px solid var(--border);height:var(--headH)}
.wrap{width:100%;max-width:none;margin:0;padding:6px 10px}
.header-bar{display:flex;align-items:center;justify-content:space-between;gap:12px}
.header-left{display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0}
.header-left .tabs{flex:1 1 auto}
.header-left .btn{flex:0 0 auto}
.header-actions{display:flex;align-items:center;gap:8px;flex-shrink:0}
.header-backups{display:flex;align-items:center;gap:6px;flex-wrap:nowrap}
.header-backups .btn{flex:0 0 auto}
#btn-sign-out{display:inline-flex;align-items:center;gap:6px}
.auth-user{display:flex;align-items:center;gap:8px;font-size:12px}
.auth-gate{position:fixed;inset:0;background:rgba(250,250,250,.94);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;padding:20px;z-index:40}
.auth-card{background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:0 16px 40px rgba(15,23,42,.18);padding:26px 24px;max-width:360px;width:min(100%,360px);display:flex;flex-direction:column;gap:16px;text-align:center}
.auth-logo{width:120px;align-self:center;display:block;margin-bottom:6px}
.auth-card h1{margin:0;font-size:22px}
.auth-card .auth-sub{margin:0;color:var(--muted)}
.auth-card .btn{justify-content:center;width:100%}
.auth-card .btn.primary{font-size:15px;padding:10px 12px}
.auth-divider{display:flex;align-items:center;gap:12px;color:var(--muted);font-size:12px}
.auth-divider::before,.auth-divider::after{content:"";flex:1;height:1px;background:var(--border)}
.auth-magic{display:flex;flex-direction:column;gap:8px;text-align:left}
.auth-magic label{font-weight:600;font-size:13px}
.auth-magic input{width:100%}
.auth-password{display:flex;flex-direction:column;gap:8px;text-align:left}
.auth-password label{font-weight:600;font-size:13px}
.auth-password input{width:100%}
.auth-password .auth-actions{display:flex;flex-direction:column;gap:8px}
.auth-password .auth-actions .btn{width:100%}
.auth-link{background:none;border:none;padding:0;margin:0;color:var(--accent);font-size:12px;cursor:pointer;text-decoration:underline;align-self:flex-start}
.auth-link:disabled{color:var(--muted);cursor:not-allowed;text-decoration:none}
.auth-feedback{min-height:16px;font-size:12px;color:var(--muted);text-align:left}
.auth-feedback.error{color:var(--red)}
.auth-feedback.success{color:var(--green)}
body.offline-mode .ai-helper{display:none!important}
.sync-status{margin:6px 0 10px;font-size:12px}
.sync-status.is-success{color:var(--green)}
.sync-status.is-warning{color:var(--yellow)}
.sync-status.is-error{color:var(--red)}
main{height:calc(100vh - var(--headH)); overflow:hidden;position:relative;z-index:1}
.tabs{display:flex;gap:6px;flex-wrap:nowrap;padding:4px 2px;overflow-x:auto;min-width:0;flex:1}
.tabs::-webkit-scrollbar{display:none}
.tab{padding:6px 8px;border:1px solid var(--border);border-bottom-color:transparent;border-radius:10px 10px 0 0;background:var(--card);cursor:pointer;font-weight:700;font-size:13px;white-space:nowrap;flex-shrink:0;transition:background-color .15s ease,color .15s ease,border-color .15s ease}
.tab.active{background:var(--accent);border-color:var(--accent);color:#f0f9ff}
.view{display:none;height:100%;overflow:auto;padding:8px 4px}
.view#view-reglages{margin-top:20px}
.view.active{display:block}
#view-dashboard{margin:20px 0;}
.grid{display:grid;gap:10px}
.g4{grid-template-columns:repeat(4,minmax(0,1fr))}
@media (max-width:1300px){.g4{grid-template-columns:repeat(3,1fr)}}
@media (max-width:980px){.g4{grid-template-columns:repeat(2,1fr)}}
@media (max-width:660px){.g4{grid-template-columns:repeat(1,1fr)}}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px;box-shadow:0 1px 0 #00000008}
.card-header{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;margin-bottom:6px}
.card-header .title{margin:0}
.title{font-weight:700}
.sub{color:var(--muted);font-size:11px}
.row{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.row.space{justify-content:space-between}
.pill{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:3px 8px;font-size:12px}
.pill.stb{background:var(--stb);border-color:var(--stb);color:var(--stb-f)}
.pill.note{background:var(--note);border-color:var(--note);color:var(--note-f)}
.pill.verb{background:var(--verb);border-color:var(--verb);color:var(--verb-f)}
.pill.avis{background:var(--avis);border-color:var(--avis);color:var(--avis-f)}
.pill.alerte{background:var(--alerte);border-color:var(--alerte);color:var(--alerte-f)}
.pill.prol{background:var(--prolongement);border-color:var(--prolongement);color:var(--prolongement-f)}
.btn{border:1px solid var(--border);background:var(--card);border-radius:8px;padding:5px 8px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;text-decoration:none;color:inherit}
.btn:disabled,.btn[disabled]{opacity:.5;cursor:not-allowed;pointer-events:none}
.btn[aria-disabled="true"]{opacity:.5;cursor:not-allowed}
.btn.small:disabled,.btn.small[disabled]{pointer-events:none}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
.btn.primary.is-dirty{box-shadow:0 0 0 2px rgba(7,89,133,.3);}
.btn.ghost{background:transparent}
.btn.danger{border-color:var(--red);color:var(--red)}
#activities-table .btn.danger{border-color:transparent}
.btn.small{padding:3px 7px;font-size:12px}
input,select,textarea{border:1px solid var(--border);background:#fff;border-radius:8px;padding:6px 8px;font:inherit}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 1px var(--accent)}
textarea{width:100%;resize:vertical}
.field-with-action{display:flex;flex-direction:column;gap:4px}
.checkbox-field{display:flex;align-items:center;gap:6px;font-weight:600;}
.checkbox-field input{margin:0;}
.alert-type-select{grid-column:1/-1;display:flex;flex-direction:column;gap:4px;}
.alert-type-select>label{display:flex;flex-direction:column;gap:4px;font-weight:600;font-size:13px;}
.alert-type-select select{font-weight:500;}
.textarea-with-action{position:relative;display:block}
.textarea-with-action textarea{width:100%;padding-top:10px;padding-right:44px;line-height:1.45}
.textarea-with-action .ai-helper{position:absolute;right:6px;top:6px}
.input-with-action{position:relative;display:block}
.input-with-action input{width:100%;padding-right:44px}
.input-with-action .ai-helper{position:absolute;right:6px;top:50%;transform:translateY(-50%)}
.field-pair{grid-column:1/-1;display:flex;align-items:flex-end;gap:8px;flex-wrap:nowrap}
.field-pair>label{flex:1 1 0;min-width:0}
.hashtag-suggestions{display:none;gap:6px;flex-wrap:wrap;margin-top:4px}
.hashtag-suggestions.active{display:flex}
.hashtag-suggestions button{border:1px solid var(--border);background:var(--bg);border-radius:999px;padding:2px 8px;font-size:12px;cursor:pointer}
.hashtag-suggestions button:hover{border-color:var(--accent);color:var(--accent)}
.hashtag-suggestions button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.activity-beneficiary{display:inline-flex;align-items:center;gap:4px;padding:0 6px;border-radius:999px;border:1px solid var(--border);background:var(--bg);font-size:12px;line-height:1.4}
.description-field{height:21.75em;min-height:21.75em;max-height:21.75em;resize:none;overflow:auto}
#dlg-guidee .description-field{height:10.875em;min-height:10.875em;max-height:10.875em}
.textarea-with-action textarea.description-field{padding-right:44px}
.pane{display:flex;flex-direction:column;min-height:0;height:100%}
.pane-header{position:sticky;top:calc(var(--headH));z-index:2;background:var(--bg);border-bottom:1px solid var(--border);padding:4px 0;display:flex;flex-direction:column;gap:4px}
.header-line{display:flex;align-items:flex-start;justify-content:flex-start;gap:12px;flex-wrap:wrap}
.header-main{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.filters-line{display:flex;gap:6px;align-items:stretch;flex-wrap:nowrap;overflow-x:auto}
.filters-line>*{flex:1 1 140px;min-width:0}
.guidee-filters{display:flex;gap:6px;align-items:center;flex-wrap:nowrap;overflow-x:auto}
.guidee-filters>*{flex:0 1 160px;min-width:0;width:auto}
.row.space.guidee-header{justify-content:flex-start;gap:12px;}
.row.space.guidee-header>.guidee-filters{margin-left:0;}
.pane-body{min-height:0;overflow:hidden;flex:1}
#acts-pane .pane-body,.timeline-scroll{position:relative}
.table-scroll,.timeline-scroll{height:100%;overflow:auto}
.table-scroll{width:100%}
.timeline-scroll{display:flex;justify-content:center;padding:0 8px;box-sizing:border-box}
#guidee-pane .pane-body{margin-top:20px}
.hover-scroll{overflow:auto;scrollbar-gutter:stable both-edges;scrollbar-width:thin;scrollbar-color:transparent transparent}
.hover-scroll:hover{ scrollbar-color:#c5c9d2 #eef1f6; }
.hover-scroll::-webkit-scrollbar{width:8px;height:8px}
.hover-scroll::-webkit-scrollbar-thumb{background-color:transparent;border-radius:8px}
.hover-scroll:hover::-webkit-scrollbar-thumb{background-color:#c5c9d2}
.hover-scroll::-webkit-scrollbar-track{background:transparent}
.hover-scroll:hover::-webkit-scrollbar-track{background:#eef1f6}
.table{width:100%;border-collapse:collapse;table-layout:fixed}
.table th,.table td{border-top:1px solid var(--border);padding:6px 8px;vertical-align:top}
.table th{font-size:12px;color:var(--muted);text-align:left;background:var(--card);position:sticky;top:0;z-index:1}
.table tbody tr{transition:background-color .08s ease;--selection-color:var(--fg);--type-border-color:var(--border);box-shadow:none}
.table tbody tr:hover{background:var(--hover)}
.table tbody tr.selected{background:var(--card);outline:2px solid var(--selection-color);outline-offset:-2px}
.table tbody tr.clickable{cursor:pointer}
.muted{color:var(--muted)}
.dot{width:10px;height:10px;border-radius:50%}
.dot.g{background:var(--green)} .dot.y{background:var(--yellow)} .dot.r{background:var(--red)} .dot.gray{background:#9ca3af}
.green{color:var(--green);font-weight:700}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;white-space:pre-wrap}
.hidden{display:none!important}
.linklike{cursor:pointer;text-decoration:underline}
.click-span{cursor:pointer;text-decoration:none;color:inherit}
.click-span:hover{color:inherit}
.nowrap{white-space:nowrap}
.bold{font-weight:700}
dialog{border:none;border-radius:16px;box-shadow:0 10px 30px #0000002a;padding:0;width:min(100vw,1024px);max-width:1024px;height:auto;max-height:calc(100vh - 40px);margin:auto}
dialog::backdrop{background:#0006}
.modal{padding:16px;display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 40px);overflow:auto}
.modal h3{margin:0}
.modal .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
@media (max-width:700px){
  .modal .grid2{grid-template-columns:1fr}
  .field-pair{flex-direction:column;align-items:stretch}
  .field-pair>label{width:100%}
  .modal label>input,
  .modal label>select,
  .modal label>textarea{width:100%}
}
.actions{display:flex;gap:8px;justify-content:flex-end;padding:10px;border-top:1px solid var(--border);background:var(--bg);margin-top:16px}
.modal .actions{margin-top:auto;padding:12px 16px}
/* colonnes activités (date fusionnée dans Type) */
.col-type{width:150px}
.col-consultant{width:220px}
.col-main{width:auto}
.col-actions{width:84px}
.activity-title{font-weight:700;margin-bottom:4px;display:flex;gap:6px;align-items:center}
.activity-title .sub{font-weight:400}
.activity-desc{line-height:1.45;color:inherit;white-space:pre-line}
@media (max-width:900px){
.col-consultant{width:180px}
.col-type{width:140px}
.col-actions{width:76px}
}
.clamp-1{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.clamp-3{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.clamp-5{display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;overflow:hidden}
.clamp-8{display:-webkit-box;-webkit-line-clamp:8;-webkit-box-orient:vertical;overflow:hidden}
#acts-pane .pane-header{gap:6px}
.actions-bar{display:flex;gap:6px;flex-wrap:wrap}
.modal-header{margin-bottom:4px}
.modal-close{padding:0 6px;font-size:16px;line-height:1}
.modal-close.btn{border:none;background:transparent;color:var(--muted);}
.modal-close.btn:hover{color:var(--fg)}
.filters-grid{display:grid;gap:6px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.filter-select{width:100%;min-height:32px;padding:4px 8px;border-radius:8px;transition:border-color .12s ease,box-shadow .12s ease;font-size:13px}
.filter-select.active{border-color:var(--accent);box-shadow:0 0 0 1px var(--accent)}
.guidee-filters select{min-height:32px;padding:4px 8px;border-radius:8px;font-size:12px;border:1px solid var(--border);background:#fff;transition:border-color .12s ease,box-shadow .12s ease}
.guidee-filters select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 1px var(--accent)}

@media (max-width:900px){
  .filters-line{gap:4px}
  .filters-line>*{flex:1 1 calc((100% - 12px)/4);min-width:0}
}

@media (max-width:700px){
  .guidee-filters{width:100%}
  .guidee-filters>*{flex:1 1 calc(50% - 3px);min-width:0}
}

#p-hashtags{min-height:300px;height:300px}

.timeline{display:flex;flex-direction:column;gap:14px;padding:8px 4px 24px;width:100%;max-width:1024px;margin:0 auto}
.timeline-item{display:flex;gap:12px;align-items:flex-start;--timeline-body-bg:var(--card);--timeline-body-fg:var(--fg);--timeline-border:var(--border);--timeline-marker-border:var(--border);--selection-color:var(--fg);--timeline-color:var(--border)}
.timeline-marker{width:24px;height:24px;border-radius:50%;border:2px solid var(--timeline-marker-border);display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;transition:all .15s ease;background:#fff;color:var(--muted)}
.timeline-body{background:var(--timeline-body-bg);border:1px solid var(--timeline-border);border-radius:10px;padding:8px 12px;flex:1;box-shadow:0 1px 0 #00000008;display:flex;flex-direction:column;gap:6px;color:var(--timeline-body-fg)}
.timeline-item.past{--timeline-body-bg:#f3f4f6;--timeline-body-fg:#4b5563}
.timeline-item.future{--timeline-body-bg:#fff;--timeline-body-fg:var(--fg)}
.timeline-item.past .timeline-marker{background:#e5e7eb;border-color:#d1d5db;color:#4b5563}
.timeline-item.future .timeline-marker{background:#fff}
.timeline-item-milestone{--timeline-body-bg:var(--accent);--timeline-body-fg:#fff;--timeline-border:var(--accent);--timeline-marker-border:var(--accent)}
.timeline-item-milestone .timeline-marker{background:var(--accent);color:#fff}
.timeline-item-milestone .timeline-meta-date{color:inherit}
.timeline-item-milestone .timeline-edit.btn{color:#fff;border-color:rgba(255,255,255,.35)}
.timeline-item-milestone .timeline-edit.btn:hover{border-color:#fff}
.timeline-item-milestone .consultant-chip .btn{color:#fff;border-color:rgba(255,255,255,.35);}
.timeline-item-milestone .consultant-chip .btn:hover{border-color:#fff;}
.timeline-item.selected .timeline-body{border-width:2px;border-color:var(--selection-color);box-shadow:none}
.timeline-meta{font-size:13px;line-height:1.45;display:flex;flex-direction:column;gap:4px;font-weight:600;color:inherit;align-items:flex-start;text-align:left}
.timeline-meta-primary{display:flex;align-items:center;gap:6px;flex-wrap:wrap;color:inherit}
.timeline-meta-date{display:flex;align-items:center;gap:6px;width:100%;justify-content:flex-start}
.timeline-meta-separator{color:var(--muted);font-size:12px}
.timeline-meta-date .sub{font-size:12px}
@media (max-width:600px){
  .timeline-meta-date{flex-direction:column;align-items:flex-start;gap:4px}
  .timeline-meta-separator{display:none}
}
.timeline-item-milestone .timeline-meta-date .sub{color:rgba(255,255,255,.85)}
.timeline-item-milestone .timeline-body{align-items:flex-end;text-align:right}
.timeline-item-milestone .timeline-meta{align-items:flex-end;text-align:right;width:100%}
.timeline-item-milestone .timeline-meta-primary{justify-content:flex-end}
.timeline-item-milestone .timeline-meta-date{justify-content:flex-end}
.timeline-item-milestone .timeline-meta-secondary{justify-content:flex-end}
.timeline-item-milestone .timeline-description{text-align:right}
@media (max-width:600px){
  .timeline-item-milestone .timeline-meta-date{align-items:flex-end}
}
.timeline-text{font-size:13px;line-height:1.45;color:inherit;display:flex;flex-wrap:wrap;gap:6px;align-items:flex-start;word-break:break-word}
.timeline-text.clamp-3{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.timeline-text.clamp-8{display:-webkit-box;-webkit-line-clamp:8;-webkit-box-orient:vertical;overflow:hidden}
.timeline-item.selected .timeline-text{display:block;-webkit-line-clamp:unset;overflow:visible}
.timeline-description{font-size:13px;line-height:1.45;color:inherit;white-space:pre-line;word-break:break-word;overflow-wrap:anywhere}
.timeline-description.clamp-8{display:-webkit-box;-webkit-line-clamp:8;-webkit-box-orient:vertical;overflow:hidden}
.timeline-item.selected .timeline-description{display:block;-webkit-line-clamp:unset;overflow:visible}
.timeline-meta-secondary{margin-top:4px;font-size:12px;color:inherit;display:flex;flex-wrap:wrap;gap:6px;align-items:center}
.timeline-item.past .timeline-text .sub{color:inherit}
.timeline .empty{padding:24px;border:1px dashed var(--border);border-radius:12px;text-align:center;color:var(--muted)}
.timeline-item.clickable .timeline-body{cursor:pointer}
.timeline-edit{display:none}
.timeline-item.selected .timeline-edit{display:inline-flex}
.timeline-edit-guidee{display:inline-flex}
.timeline-edit.btn{padding:2px 6px;font-size:12px}
.timeline-edit.btn.small{font-size:12px}
.hours-badge{display:inline-flex;align-items:center;gap:4px;padding:0 6px;border-radius:999px;background:var(--pill);color:#111;font-size:12px;line-height:1.4;font-weight:500}
.hours-badge b{font-weight:500}
.probability-badge,.alert-status-badge,.alert-type-badge{display:inline-flex;align-items:center;padding:0 6px;border-radius:999px;font-size:12px;line-height:1.4;font-weight:600;background:var(--pill);color:#111;white-space:nowrap;border:none}
.probability-badge.prob-oui,.probability-badge.prob-probable,.probability-badge.prob-incertain,.probability-badge.prob-improbable,.probability-badge.prob-non{background:var(--pill);color:#111;border:none}
.alert-status-badge.status-majeur,.alert-status-badge.status-mineur,.alert-status-badge.status-inactif{background:var(--pill);color:#111;border:none}
.alert-type-badge.type-rh,.alert-type-badge.type-mixed{background:var(--pill);color:#111;border:none}
.db-row .alert-status-badge{margin-left:4px;}
.consultant-chip{display:inline-flex;align-items:center;gap:4px;flex-wrap:nowrap;}
.consultant-chip .consultant-name{font-weight:600;}
.consultant-chip-bold .consultant-name{font-weight:700;}
.consultant-chip .btn{padding:2px 6px;font-size:12px;}
.consultant-chip .boond-link{display:inline-flex;align-items:center;justify-content:center;font-size:14px;line-height:1;text-decoration:none;padding:0 2px;border-radius:6px;}
.consultant-chip .boond-link:hover{background:var(--hover);}
.consultant-chip .boond-link:focus{outline:2px solid var(--accent);outline-offset:2px;}
.activity-title .activity-meta-inline{display:inline-flex;align-items:center;gap:6px;margin-left:8px;font-size:12px;color:var(--muted)}
.activity-title .activity-meta-inline .activity-guidee-chip{font-weight:600;}
.mobile-desc{margin-top:4px;display:flex;flex-direction:column;gap:4px}
.mobile-desc .text{word-break:break-word;overflow-wrap:anywhere;white-space:pre-line}
.mobile-desc.expanded .text{-webkit-line-clamp:unset;display:block;overflow:visible}
#activities-table td.main{word-break:break-word;overflow-wrap:anywhere}
#activities-table td:last-child .btn.small{white-space:nowrap}
.activity-date-line{display:flex;align-items:center;gap:6px;margin-left:auto}
.row-edit{display:none}
tr.selected .row-edit{display:inline-flex}
.row-edit.btn{padding:2px 6px}
.type-pill{display:inline-flex;align-items:center;gap:6px}
.rowline{position:relative;padding:2px 4px;border-radius:8px;overflow:hidden}
.rowline .fill{position:absolute;inset:0 0 0 0;width:0;height:100%;z-index:0;opacity:.9}
.rowline .content{position:relative;z-index:1;margin:6px 2px}
.fill-g{background:var(--bar-g)} .fill-y{background:var(--bar-y)} .fill-r{background:var(--bar-r)}
.cons-mini{font-size:12px;line-height:1.15}
.cons-mini .sub{font-size:10px}
.cons-mini .rowline{margin:2px 0;padding:1px 3px;border-radius:6px}
.cons-mini .rowline .content{margin:3px 2px}
.cons-mini .row.space{gap:4px}
/* Dashboard list */
.db-list{font:inherit;font-size:13px;line-height:1.6}
.db-list .row{margin:3px 0}
.db-row{margin:4px 0;padding:4px 0;border-bottom:1px solid var(--border)}
.db-row:last-child{border-bottom:none}
.db-row> .sub{margin-top:2px}
.db-row.clickable-row{cursor:pointer}
.dashboard-actions{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (max-width:900px){.dashboard-actions{grid-template-columns:1fr}}
/* Réglages = Paramètres + Sync en 2 colonnes */
.dashboard-toolbar{display:flex;justify-content:flex-end;margin-bottom:10px}
.reglages-toolbar{display:flex;justify-content:flex-start;margin-bottom:10px}
.reglages-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;align-items:start}
@media (max-width:1220px){.reglages-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:720px){.reglages-grid{grid-template-columns:1fr}}
.backup-block{margin-top:12px;padding-top:12px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:8px}
.backup-block .subtitle{font-weight:600;font-size:13px;color:var(--muted)}
/* 📱 mobile patch */
.desktop-only{display:revert}
.mobile-only{display:none}
@media (max-width:520px){
  main{height:calc(100vh - var(--headH));min-height:calc(100vh - var(--headH));overflow:hidden;position:relative;z-index:1}
  .header-bar{flex-wrap:wrap;gap:8px;align-items:flex-start}
  .header-left{order:1;width:100%;gap:6px}
  .header-actions{width:auto;flex:0 1 auto;margin-left:auto;justify-content:flex-end;flex-wrap:wrap;gap:6px;position: absolute; top:10px; right:10px;}
  .header-backups{display:none}
  #btn-sync-indicator{order:0}
  .header-actions #auth-user{order:1}
  .header-actions .btn{flex:0 0 auto}
  .view{height:100%}
  #activities-table thead{display:none}
  #activities-table colgroup{display:none}
#activities-table tr{display:block;border:1px solid var(--border);border-radius:10px;margin:8px 0;background:var(--card);padding:8px}
#activities-table td{display:block;border-top:none;padding:2px 0}
#activities-table td.desktop-only{display:none!important}
#activities-table td.mobile-only{display:block!important}
.mobile-only{display:block}
.col-actions, #activities-table td.actions-cell{display:none!important}
#view-activite{overflow:hidden;padding-top:2px}
#acts-pane{height:100%}
#acts-pane .pane-body{min-height:0;overflow:auto}
#acts-pane .pane-header{padding:2px 0 6px}
#acts-pane .pane-header .filters-line{margin:2px 0 0}
.header-main{width:100%;gap:6px;flex-wrap:nowrap;align-items:center}
.header-main .title{order:0}
.header-main .pill{order:1}
.header-main .btn.primary{order:2;margin-left:auto}
.header-main button:not(.primary){order:3;flex:0 0 auto}
.header-main .btn{white-space:nowrap}
  .filters-line{width:100%;grid-template-columns:repeat(2,minmax(0,1fr));gap:4px}
  .thematique-row{flex-direction:column;align-items:stretch}
  .thematique-row .them-delete{margin-left:0;align-self:flex-end}
  .filters-grid{grid-template-columns:repeat(2,minmax(0,1fr));gap:4px}
  .filter-select{min-height:28px;font-size:12px;padding:2px 6px}
  .guidee-filters{display:flex;flex-wrap:nowrap;justify-content:flex-end;gap:4px}
  .guidee-filters select{min-height:28px;padding:2px 6px;font-size:12px;min-width:0;width:auto;flex:1 1 0}
  .reporting-toolbar{align-items:flex-start;gap:6px}
  .reporting-toolbar-dates{flex-wrap:nowrap;gap:6px}
  .reporting-toolbar-dates label{flex:1 1 0;min-width:0}
  .reporting-toolbar-actions{flex:1 1 0;display:flex;flex-wrap:nowrap;gap:6px}
  .reporting-toolbar-actions .btn{flex:1 1 0;justify-content:center}
  .reporting-toolbar .spacer{display:none}
}

@media (max-width:520px){
  body.offline-mode .header-backups,
  body.offline-mode #btn-sync-indicator{display:none!important}
  body.offline-mode .header-actions{justify-content:flex-end}
}
.guidee-progress{position:static;display:flex;align-items:center;gap:8px;padding:4px 0 0;background:transparent;border-top:none;--progress-color:var(--accent)}
#guidee-pane .guidee-progress{padding:4px 0 0}
.guidee-progress-bar{flex:1;height:4px;border-radius:999px;background:var(--border);position:relative;overflow:hidden}
.guidee-progress-bar span{position:absolute;top:0;bottom:0;left:0;width:0;background:var(--progress-color);border-radius:inherit;transition:width .2s ease}
.guidee-progress-label{font-size:12px;font-weight:600;min-width:80px;text-align:right;color:var(--muted);white-space:nowrap}

.table tbody tr.past{color:#4b5563;--type-border-color:#d1d5db}
.table tbody tr.past .sub{color:#6b7280}
.table tbody tr.past .pill{opacity:.75}
.table tbody tr.past button{opacity:.75}
.table tbody tr.future{background:#fff}

@media (max-width:700px){
dialog{--mobile-dialog-offset:max(env(safe-area-inset-bottom,0px),20px);border-radius:0;width:100vw;height:calc(100vh - var(--mobile-dialog-offset));max-height:calc(100vh - var(--mobile-dialog-offset));margin:0}
.modal{max-height:none;height:100%;padding:16px 16px calc(120px + 48px + env(safe-area-inset-bottom,0px));}
.modal .actions{position:fixed;left:16px;right:16px;bottom:calc(env(safe-area-inset-bottom,0px));margin-top:0;padding:12px 16px;background:var(--card);border-radius:12px;box-shadow:0 -6px 24px rgba(15,23,42,.12);z-index:5;}
}

.modal.confirm-modal{max-width:420px}
.modal.confirm-modal p{margin:0;color:var(--muted);line-height:1.45}
.modal.confirm-modal .actions{justify-content:flex-end}

.reporting-pane{display:flex;flex-direction:column;gap:12px;}
.reporting-toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-top:12px;}
.reporting-toolbar-group{display:flex;gap:8px;align-items:flex-end;flex-wrap:wrap;flex:0 0 auto}
.reporting-toolbar label{display:flex;flex-direction:column;gap:4px;font-size:12px;}
.reporting-toolbar input[type=date]{min-width:100px;}
.reporting-toolbar .spacer{flex:1 1 auto;min-width:0;}
.reporting-toolbar-actions{flex:0 0 auto;gap:8px;display:flex;flex-wrap:wrap;align-items:flex-end}
.reporting-toolbar-actions .btn{align-self:flex-start;}
.reporting-toolbar-dates{flex:1 1 auto;min-width:0;display:flex;gap:8px;flex-wrap:wrap}
.reporting-toolbar-dates label{min-width:0;flex:1 1 0}
.reporting-document{margin-top:8px;display:flex;flex-direction:column;gap:16px;font-size:13px;line-height:1.5;}
.reporting-document table{width:100%;border-collapse:collapse;font-size:13px;}
.reporting-document th,.reporting-document td{border:1px solid var(--border);padding:6px;vertical-align:top;}
.reporting-document th{background:var(--bg);text-align:left;}
.reporting-document caption{font-weight:700;margin-bottom:6px;text-align:left;}
.reporting-document .caption-sub{display:block;font-size:12px;font-weight:500;color:var(--muted);margin-top:2px;}
.reporting-document .reporting-section{display:flex;flex-direction:column;gap:8px;}
.reporting-link{color:var(--accent);cursor:pointer;text-decoration:underline;font-weight:500;}
.reporting-link:hover,.reporting-link:focus{color:var(--accent-strong);}
.reporting-link:focus{outline:2px solid var(--accent);outline-offset:2px;}
.activity-title .activity-title-text{font-weight:600;}
.activity-meta .activity-guidee-chip{font-weight:600;}
.activity-guidee{margin-top:6px;display:flex;align-items:center;gap:6px;flex-wrap:wrap;line-height:1.45;color:inherit}
.activity-guidee .activity-guidee-link{text-decoration:none;color:inherit;font-weight:600;}
.activity-guidee .activity-guidee-link:focus{outline:2px solid var(--accent);outline-offset:2px;}
